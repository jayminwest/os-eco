{"id":"os-eco-ff85","title":"CLI alignment: unified UX across ecosystem","status":"open","type":"epic","priority":1,"createdAt":"2026-02-24T03:25:08.467Z","updatedAt":"2026-02-24T03:25:08.467Z","description":"Align all four CLIs (mulch, sd, cn, overstory) on framework, output, error handling, and command patterns. Mulch is the reference implementation. Big bang for Seeds and Canopy; incremental for Overstory."}
{"id":"os-eco-c9ca","title":"Seeds: adopt Commander for CLI parsing","status":"open","type":"feature","priority":1,"createdAt":"2026-02-24T03:25:15.205Z","updatedAt":"2026-02-24T03:26:14.342Z","description":"Seeds currently uses manual process.argv parsing with a switch statement in src/index.ts. Migrate to Commander (like Mulch) to get: structured arg/option definitions, auto-generated help with argument types and choices, .addHelpText() for detailed per-command docs, built-in version display. This is a big-bang rewrite of the CLI layer — command logic stays, only the parsing/routing changes. Reference: mulch/src/cli.ts for the pattern. Each command in src/commands/ should export a register function that takes a Commander program instance.","blocks":["os-eco-4b0e","os-eco-3043","os-eco-c2ef"]}
{"id":"os-eco-e3ba","title":"Overstory multi-repo mode: spawn agents into sub-repos","status":"open","type":"feature","priority":2,"createdAt":"2026-02-24T03:25:17.685Z","updatedAt":"2026-02-24T03:25:17.685Z","description":"Add --repo flag to overstory sling/merge so the root overstory instance can spawn agents into sub-repo worktrees (seeds, mulch, canopy, overstory) and merge them back. Config adds a repos map in .overstory/config.yaml. Mail/sessions/metrics stay in root .overstory/ for unified coordination. Main changes: sling.ts (worktree creation targeting sub-repo git dir), merge.ts (repo-aware merge), config.ts (repos map)."}
{"id":"os-eco-4b0e","title":"Seeds: adopt chalk for output formatting","status":"open","type":"feature","priority":1,"createdAt":"2026-02-24T03:25:20.225Z","updatedAt":"2026-02-24T03:26:14.267Z","description":"Seeds uses raw ANSI escape codes in src/output.ts with manual TTY/NO_COLOR detection. Migrate to chalk (like Mulch) for: consistent color API across the ecosystem, automatic terminal capability detection, cleaner output code. Current Seeds patterns to migrate: c.green/c.red/c.bold/c.dim helper functions → chalk.green/chalk.red/chalk.bold/chalk.dim. Status icons (●/◐/○) and printIssueOneLine/printIssueFull formatting should be preserved but use chalk underneath. The outputJson/printSuccess/printError helpers should match Mulch's patterns (✔ green for success, Error: red for errors).","blockedBy":["os-eco-c9ca"]}
{"id":"os-eco-3043","title":"Seeds: align error handling with ecosystem pattern","status":"open","type":"feature","priority":2,"createdAt":"2026-02-24T03:25:24.316Z","updatedAt":"2026-02-24T03:26:14.287Z","description":"Seeds uses process.exit(1) in its main catch block. Migrate to process.exitCode = 1 (Mulch pattern) for better testability — allows event loop to drain and vitest/bun test to capture output cleanly. Also standardize JSON error shape: currently { success: false, command, error } which already matches Mulch. Ensure all commands use consistent error surfacing: console.error() with chalk.red in human mode, structured JSON in --json mode.","blockedBy":["os-eco-c9ca"]}
{"id":"os-eco-d4e0","title":"Canopy: adopt Commander for CLI parsing","status":"open","type":"feature","priority":1,"createdAt":"2026-02-24T03:25:30.825Z","updatedAt":"2026-02-24T03:26:14.360Z","description":"Canopy uses manual process.argv parsing with a switch statement in src/index.ts, plus per-command flag parsing via local helpers. Migrate to Commander (like Mulch) to get: structured arg/option definitions, auto-generated help, choice validation, .addHelpText() for detailed docs. Big-bang rewrite of CLI layer. Each command in src/commands/ should export a register function. Reference: mulch/src/cli.ts. Notable: Canopy has subcommands (schema create/show/list, schema rule add) — Commander supports this via .command().command() nesting.","blocks":["os-eco-4ebc","os-eco-7dc3","os-eco-c2ef"]}
{"id":"os-eco-4ebc","title":"Canopy: adopt chalk for output formatting","status":"open","type":"feature","priority":1,"createdAt":"2026-02-24T03:25:34.873Z","updatedAt":"2026-02-24T03:26:14.306Z","description":"Canopy uses raw ANSI codes in src/output.ts with manual NO_COLOR/TTY detection. Migrate to chalk (like Mulch) for consistent ecosystem UX. Current Canopy patterns to migrate: c.bold/c.dim/c.green/c.red/c.yellow/c.cyan/c.blue helpers → chalk equivalents. Preserve the humanOut/jsonOut/errorOut helper pattern but use chalk underneath. Status indicators (✓/✗/→) should match Mulch's style (✔ for success, Error: prefix for failures).","blockedBy":["os-eco-d4e0"]}
{"id":"os-eco-7dc3","title":"Canopy: align error handling with ecosystem pattern","status":"open","type":"feature","priority":2,"createdAt":"2026-02-24T03:25:36.130Z","updatedAt":"2026-02-24T03:26:14.324Z","description":"Canopy has a custom ExitError class and uses both process.exit(1) and throw ExitError(1). Migrate to process.exitCode = 1 pattern (Mulch standard) for testability. The ExitError class can remain for internal flow control but the top-level handler should set process.exitCode rather than calling process.exit(). JSON error shape should be standardized: { success: false, command, error }.","blockedBy":["os-eco-d4e0"]}
{"id":"os-eco-c130","title":"Overstory: incrementally adopt Commander for CLI parsing","status":"open","type":"feature","priority":2,"createdAt":"2026-02-24T03:25:42.483Z","updatedAt":"2026-02-24T03:26:14.378Z","description":"Overstory uses manual argv parsing with local getFlag()/hasFlag()/parseArgs() helpers across 30+ commands. Incremental migration plan: (1) Add Commander as dependency, (2) Migrate simple commands first (init, status, clean, doctor), (3) Then migrate complex commands with subcommands (agents, coordinator, supervisor, mail, run, group, spec, hooks, worktree), (4) Finally migrate observability commands (dashboard, inspect, trace, errors, replay, feed, logs). Each migration should be a standalone PR. Reference: mulch/src/cli.ts for the command registration pattern.","blocks":["os-eco-c2ef"]}
{"id":"os-eco-62f5","title":"Overstory: adopt chalk for output formatting","status":"open","type":"feature","priority":2,"createdAt":"2026-02-24T03:25:46.178Z","updatedAt":"2026-02-24T03:25:46.178Z","description":"Overstory has its own ANSI color system in src/logging/color.ts with manual escape codes and NO_COLOR/FORCE_COLOR/TERM=dumb detection. Incrementally migrate to chalk: (1) Replace src/logging/color.ts internals with chalk while keeping the same API surface, (2) Then gradually migrate direct color usage in commands to chalk calls. This can be done in parallel with Commander migration. Overstory's color system is more sophisticated (has FORCE_COLOR) — chalk handles all of this natively."}
{"id":"os-eco-8748","title":"Overstory: align error handling with ecosystem pattern","status":"open","type":"feature","priority":3,"createdAt":"2026-02-24T03:25:50.221Z","updatedAt":"2026-02-24T03:25:50.221Z","description":"Overstory has a rich error hierarchy (OverstoryError → ConfigError, AgentError, HierarchyError, MailError, ValidationError, MergeError, WorktreeError) with error codes. This is the most mature error system in the ecosystem. Keep the error class hierarchy but align exit behavior: use process.exitCode = 1 instead of process.exit(1) where possible. JSON error shape should include the error code field: { success: false, command, error, code }. The error code pattern could be adopted by other tools eventually."}
{"id":"os-eco-1537","title":"Standardize shared command patterns across ecosystem","status":"open","type":"feature","priority":1,"createdAt":"2026-02-24T03:25:59.712Z","updatedAt":"2026-02-24T03:25:59.712Z","description":"All four tools have overlapping commands (sync, prime, doctor, onboard) with inconsistent flags and behavior. Align them:\n\n**sync**: All tools have sync. Standardize flags: --status (dry-run check) across all. Currently consistent.\n\n**prime**: All tools have prime. Mulch has --verbose/--full/--format/--files/--context. Seeds has --compact. Canopy has --compact/--export. Overstory has its own patterns. Align: all should support --compact and --format at minimum.\n\n**doctor**: Mulch has --fix. Seeds has --fix. Overstory has --category/--verbose. Canopy lacks doctor. Align: all should support --fix and --verbose at minimum.\n\n**onboard**: Mulch and Seeds and Canopy all have onboard. Standardize the --check/--stdout flags across all.\n\n**help text**: All --help output should follow Commander's format: Usage line, Description, Arguments, Options with types/defaults, Examples via addHelpText.\n\n**--json**: All tools support --json. Ensure consistent behavior: always outputs to stdout, errors still to stderr, response shape { success, command, data/error }."}
{"id":"os-eco-c2ef","title":"Add shell completion support to Seeds and Canopy","status":"open","type":"feature","priority":3,"createdAt":"2026-02-24T03:26:03.741Z","updatedAt":"2026-02-24T03:26:14.378Z","description":"Overstory has shell completions (--completions bash/zsh/fish) via src/commands/completions.ts. Mulch has no completions (Commander can generate basic ones). Seeds and Canopy have none. Once Commander is adopted across all tools, add shell completion generation. Commander has built-in completion support or can be extended. Overstory's completion system (CommandDef/FlagDef/SubcommandDef types) is a good reference but should be replaced with Commander's native approach once migrated.","blockedBy":["os-eco-c9ca","os-eco-d4e0","os-eco-c130"]}
{"id":"os-eco-5890","title":"Standardize version management across ecosystem","status":"open","type":"feature","priority":3,"createdAt":"2026-02-24T03:26:07.913Z","updatedAt":"2026-02-24T03:26:07.913Z","description":"Version handling differs across tools:\n- Mulch (0.5.0): VERSION in package.json, program.version() in cli.ts, has version check utility (npm registry)\n- Seeds (0.2.0): VERSION const in src/index.ts + package.json, manual --version flag\n- Canopy (0.1.2): VERSION const in src/index.ts + package.json, manual --version flag  \n- Overstory (0.6.0): VERSION const in src/index.ts + package.json, manual --version flag\n\nAll have scripts/version-bump.ts. Once Commander is adopted, use program.version() consistently. Consider whether each tool should have an update-check like Mulch's getLatestVersion()."}
{"id":"os-eco-2b32","title":"Stop hook error: mulch not found in agent PATH","status":"closed","type":"bug","priority":2,"createdAt":"2026-02-24T14:06:44.987Z","updatedAt":"2026-02-24T14:42:37.227Z","closedAt":"2026-02-24T14:42:37.227Z","closeReason":"Fixed manually. Follow-up doctor checks tracked in overstory seeds-93a8."}
{"id":"os-eco-ca1c","title":"Add --root flag to sd create for writing to project root .seeds/","status":"closed","type":"feature","priority":3,"createdAt":"2026-02-24T16:16:43.298Z","updatedAt":"2026-02-24T16:17:18.910Z","description":"When agents run in git worktrees, sd create writes to the worktree .seeds/ directory. If that branch is never merged (e.g. lead agents), those issues are lost. Add a --root flag that writes directly to the project root .seeds/ instead of the worktree copy, so issues survive worktree cleanup regardless of merge status.","closedAt":"2026-02-24T16:17:18.910Z","closeReason":"Refiled in seeds sub-repo"}
